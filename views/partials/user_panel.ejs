<h2>Welcome back <%=user.username %></h2>
<% if(!user.isAdmin && !user.isMember) { %>
    <button>Want to become a member?</button>
<% } else if(!user.isAdmin) { %>
    <button>Want to become an admin?</button>
    <p>member</p>
<% } else { %> 
    <p>member</p>
    <p>admin</p>
<% } %>
<div class="secret-panel" style="display: none">
   <% if(!user.isMember){ %>
    <form action='/member-access' method="POST">
        <label for="membership">Do you want to become a member? Insert secret code: </label>
        <input type="text" id="membership" name="membership">
        <button type="submit">Become a member</button>
    </form>
   <% } %>
   <% if(!user.isAdmin){ %>
    <form action='/admin-access' method="POST">
        <label for="admin">Are you an admin? Insert secret code: </label>
        <input type="text" id="admin" name="admin">
        <button type="submit">Become an admin</button>
    </form>
<%} %>
</div>
<div>
    <% if(user.isMember) { %>
        <h3>Create your own message</h3>
        <form action="" method="POST">
          <label for="title">Title</label>
          <input type="text" name="title" id="title">
          <label for="body">Message: </label>
          <textarea name="body" id="body" cols="30" rows="10"></textarea>
          <label for="user">by: </label>
          <span><%= user.firstName %></span>
          <input type="text" name="user" id="user" value="<%= user._id %>" hidden>
          <button type="submit">create message</button>
          <a href="/delete-message"></a>
        </form>
        <% } %>
</div>
<a href="/log-out">log out</a>
<script>
    const memberButton = document.querySelector('button'); 
    const secretPanel = document.querySelector('div.secret-panel')
    memberButton.addEventListener('click', showMemberMenu)

    function showMemberMenu(){
        if( secretPanel.style.display === 'none') {
            secretPanel.style.display = 'block';
        } else {
            secretPanel.style.display = 'none';
        }
    }; 
</script>